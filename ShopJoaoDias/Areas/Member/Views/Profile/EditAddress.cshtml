@model AddressViewModel

<div class="app-content">

    <!--====== Section 1 ======-->
    <div class="u-s-p-y-60">

        <!--====== Section Content ======-->
        <div class="section__content">
            <div class="container">
                <div class="breadcrumb">
                    <div class="breadcrumb__wrap">
                        <ul class="breadcrumb__list">
                            <li class="has-separator">

                                <a href="index.html">Home</a>
                            </li>
                            <li class="is-marked">

                                <a href="dash-address-add.html">My Account</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--====== End - Section 1 ======-->
    <!--====== Section 2 ======-->
    <div class="u-s-p-b-60">

        <!--====== Section Content ======-->
        <div class="section__content">
            <div class="dash">
                <div class="container">
                    <div class="row">
                        <partial name="leftSide" />
                        <div class="col-lg-9 col-md-12">
                            <div class="dash__box dash__box--shadow dash__box--radius dash__box--bg-white">
                                <div class="dash__pad-2">
                                    <h1 class="dash__h1 u-s-m-b-14">Add new Address</h1>

                                    @if (ViewBag.error != null)
                                    {
                                        <div>
                                            <div class="alert-danger">
                                                @ViewBag.error
                                            </div>
                                        </div>
                                    }

                                    <span class="dash__text u-s-m-b-30">We need an address where we could deliver products.</span>
                                    <form class="dash-address-manipulation" method="post">
                                        <div class="gl-inline">
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-fname">FIRST NAME *</label>

                                                <input class="input-text input-text--primary-style" asp-for="@Model.Address.Name" type="text" id="address-fname" placeholder="First Name" />
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Name" data-valmsg-replace="true"></span>
                                            </div>
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-lname">LAST NAME *</label>

                                                <input class="input-text input-text--primary-style" type="text" id="address-lname" placeholder="Last Name" asp-for="@Model.Address.Surname" />
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Surname" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="gl-inline">
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-phone">PHONE *</label>

                                                <input class="input-text input-text--primary-style" type="text" id="address-phone" asp-for="@Model.Address.Phone">
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Phone" data-valmsg-replace="true"></span>
                                            </div>
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-street">STREET ADDRESS *</label>

                                                <input class="input-text input-text--primary-style" type="text" id="address-street" placeholder="House Name and Street" asp-for="@Model.Address.Address1">
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Address1" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="gl-inline">
                                            <div class="u-s-m-b-30">

                                                <!--====== Select Box ======-->

                                                <label class="gl-label" for="address-province">Province *</label>
                                                <select class="select-box select-box--primary-style" id="address-province" v-model="provinceId" v-on:change="getCity" asp-for="@Model.Address.Country">
                                                    <option selected value="">Choose Province</option>
                                                    <option v-for="province in parents" v-bind:value="province.id">{{province.name}}</option>
                                                </select>
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Country" data-valmsg-replace="true"></span>
                                                <!--====== End - Select Box ======-->
                                            </div>
                                            <div class="u-s-m-b-30">

                                                <!--====== Select Box ======-->

                                                <label class="gl-label" for="address-city">City *</label>
                                                <select class="select-box select-box--primary-style" id="address-city" v-model="cityId" asp-for="@Model.Address.Cityid">
                                                    <option selected value="">Choose City</option>
                                                    <option v-for="city in subs" v-bind:value="city.id">{{city.name}}</option>
                                                </select>
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Cityid" data-valmsg-replace="true"></span>
                                                <!--====== End - Select Box ======-->
                                            </div>
                                        </div>
                                        <div class="gl-inline">
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-city" asp-for="@Model.Address.Addresname">Address Name *</label>

                                                <input class="input-text input-text--primary-style" type="text" id="address-city" asp-for="@Model.Address.Addresname" />
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Addresname data-valmsg-replace=" true"></span>
                                            </div>
                                            <div class="u-s-m-b-30">

                                                <label class="gl-label" for="address-street">ZIP/POSTAL CODE *</label>

                                                <input class="input-text input-text--primary-style" type="text" id="address-postal" placeholder="Zip/Postal Code" asp-for="@Model.Address.Zipcode" />
                                                <span class="text-danger field-validation-valid" asp-validation-for="@Model.Address.Zipcode" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>

                                        <button class="btn btn--e-brand-b-2" type="submit">SAVE</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--====== End - Section Content ======-->
    </div>
    <!--====== End - Section 2 ======-->
</div>

@section Scripts {
    <script src="~/js/vue/vue.js"></script>
    <script src="~/js/axios/axios.min.js"></script>
    <script>
        var v = new Vue({
            el: "#app",
            data: {
                parents: @Html.Raw(Json.Serialize(Model.Provinces)),
                subs: [],
                cityId: "",
                provinceId: "",
            }

                    methods: {
                getCity: function () {
                    if (this.provinceId) {
                        axios.get("../SelectCity/" + this.provinceId).then(response => {
                            this.subs = response.data;
                        });
                    }
                }
            }
        })
    </script>
}